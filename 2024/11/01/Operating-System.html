<!DOCTYPE html>
<html class="direction--ltr"lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>[KR] Operating System Note | smyeong123</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="[KR] Operating System Note" />
<meta name="author" content="Sangmyeong Lee" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Operating System (운영체제)" />
<meta property="og:description" content="Operating System (운영체제)" />
<link rel="canonical" href="https://smyeong123.github.io/2024/11/01/Operating-System.html" />
<meta property="og:url" content="https://smyeong123.github.io/2024/11/01/Operating-System.html" />
<meta property="og:site_name" content="smyeong123" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2024-11-01T00:00:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="[KR] Operating System Note" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Sangmyeong Lee"},"dateModified":"2024-11-01T00:00:00+00:00","datePublished":"2024-11-01T00:00:00+00:00","description":"Operating System (운영체제)","headline":"[KR] Operating System Note","mainEntityOfPage":{"@type":"WebPage","@id":"https://smyeong123.github.io/2024/11/01/Operating-System.html"},"url":"https://smyeong123.github.io/2024/11/01/Operating-System.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/style.css">
  <link rel="icon" type="image/png" href="/assets/favicon.png" />
  <link rel="stylesheet" href="/assets/css/magnific-popup.css"><link type="application/atom+xml" rel="alternate" href="https://smyeong123.github.io/feed.xml" title="smyeong123" /><script src="https://code.jquery.com/jquery-3.2.0.min.js"></script> 
  <script src="/assets/js/jquery.magnific-popup.js"></script>
</head>
<body><div class="site-header">
  <div class="wrapper">
    <a class="site-title" rel="author" href="/">smyeong123<b class="command_prompt"></b><b class="blinking_cursor">_</b></a>
    <span class="social_links">
        
        
        <a class="color-cyan-hover" href="https://github.com/smyeong123"><i class="fab fa-github-square"></i></a>
        
        
        
        <a class="color-red-hover" href="https://linkedin.com/in/sangmyeong-lee-813996208"><i class="fab fa-linkedin"></i></a>
        
        
    </span>
  </div>
</div>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        
  <div class="author-box">


<img src="
    https://gravatar.com/avatar/aa28aa0a9897f29b7ef89578f5018bbb?s=256
" class="author-avatar" alt="Avatar" />
<div class="description">I am a Bachelor of Science graduate at the University of Sydney, majoring in Computer Science with a minor in Software Development.  My interests include backend development in Java, as well as artificial intelligence, particularly in natural language processing (NLP), computer vision (CV), and multimodal learning.
</div>

</div>


<div class="post">
  <h1 class="post-title">[KR] Operating System Note</h1>
  
  <div class="post-tags">
      
      <a class="tag" href="/tag/cs/">CS</a>
      
      <a class="tag" href="/tag/os/">OS</a>
      
  </div>
  
  <div class="post-date">
    Published on 01 Nov 2024
    
  </div>
  
  <h1 id="operating-system-운영체제">Operating System (운영체제)</h1>

<h2 id="개요">개요</h2>

<p>Operating System (OS)는 사용자가 컴퓨터를 사용하기 위해 필요한 시스템 소프트웨어이다. OS는 컴퓨터의 HW와 SW의 자원을 관리해준다. 
OS는 오늘날 개발자가 알아야하는 필수 지식중 하나로 다음과 같은 아젠다로 복습을 할 수 있다.</p>
<details>
<summary>Agenda</summary>

- Kernel &amp; System Call
- Process vs Thread
- Scheduling
- Virtual memory
- Address Translation, Paging, Swapping
- Concurrency
File System, Crash Consistency
</details>

<h2 id="user-mode-사용자-모드">User Mode (사용자 모드)</h2>
<p>사용자 모드로 실행되는 프로그램은 시스템의 자원에 직접 접근을 할 수 없다.</p>

<h3 id="system-call-시스템-호출">System Call (시스템 호출)</h3>
<p>시스템 호출: 사용자 프로그램이 커널의 기능을 요청하는 인터페이스이다. 사용자 모드에서 커널 모드로 <em>전환</em>을 한다.
예시로 <code class="language-plaintext highlighter-rouge">read()</code>, <code class="language-plaintext highlighter-rouge">write()</code>, <code class="language-plaintext highlighter-rouge">fork()</code> 등이 있다.</p>

<h2 id="kernel-mode-커널-모드">Kernel Mode (커널 모드)</h2>
<p>OS의 커널이 실행되는 모드다. 시스템의 모든 자원에 대한 접근이 가능하다. 또한 하드웨어와 직접적으로 상호작용을 한다.</p>
<h2 id="kernel-커널">Kernel (커널)</h2>
<p>커널: OS의 핵심으로 하드웨어와 소프트웨어를 연결하는 인터페이스다.
커널은 프로세스 관리, 메모리 관리, 하드웨어 자원 제어, 시스템 호출 관리를 해준다.</p>

<h2 id="process-프로세스-vs-thread-스레드">Process (프로세스) vs Thread (스레드)</h2>
<p>프로세스와 쓰레드의 차이를 알기전에 프로그램에 대해서 다시 한 번 집고 넘어가겠다.</p>

<p>프로그램이은 실행 파일(executable file)로 실행을 하기전 까지는 저장 장치에 저장만 되어있는 상태이며,아직 메모리에 할당이 안되어 있는 <strong>정적</strong>인 상태다.</p>

<p>프로그램을 실행을 하면 정적인 상태에서 <strong>동적</strong>인 상태로 변환이 되며, 해당 파일은 컴퓨터 메모리에 올라가며 이 상태를 <strong>프로세스</strong>라고 한다. 더 간단하게 말하자면 실행중인 프로그램이라고 생각하면 된다. 이 프로세스를 좀 더 작은 단위로 나눠서 접근을 할려고 하면 이제 우리는 이걸 <strong>스레드</strong>라고 한다.</p>

<p><img src="/public/media/processes.png" alt="processes" /></p>

<h3 id="프로세스"><strong>프로세스</strong></h3>
<p>프로세스는 OS로 부터 할당 받은 독립적인 실행 단위로, 프로그램이 실행 중인 상태를 나타낸다.</p>

<p>커널 안에 있는 무수히 많은 요소 중에서 프로세스를 관리하기 위해 관련 정보를 저장하는 집합이 있는데 PCB이다.</p>
<h4 id="process-control-block-pcb">Process Control Block (PCB)</h4>
<p>PCB는 프로세스 상태 및 정보를 저장하는 자료구조를 뜻한다. 프로세스는 OS로부터 스케줄링 알고리즘을 이용해 CPU의 사용량을 할당 받는다. 프로세스를 실행 중에 Context Switching 이 발생하면 현제 상태를 저장하고 CPU를 반환해야 한다. 그리고 나중에 다시 실행 됬을때 이전 상태를 불러온다. 그 정보가 저장되는 곳이 PCB이다.</p>

<p>PCB 에는 다음과 같은 정보가 저장된다.</p>
<ol>
  <li>PID (프로세스 아이디) : 고유한 프로세스 아이디이다.</li>
  <li>
    <p>Process State (프로세스 상태) :</p>

    <table>
      <thead>
        <tr>
          <th>상태</th>
          <th>설명</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>New</td>
          <td>프로세스가 막 생성된 상태</td>
        </tr>
        <tr>
          <td>Ready</td>
          <td>프로세스가 CPU에 실행되기 위해 대기하는 상</td>
        </tr>
        <tr>
          <td>Running</td>
          <td>프로세스가 작동이 되는 상태</td>
        </tr>
        <tr>
          <td>Waiting</td>
          <td>프로세스가 특정 이벤트를 기다리는 상태</td>
        </tr>
        <tr>
          <td>Terminated</td>
          <td>프로세스가 실행은 완료한 상태</td>
        </tr>
      </tbody>
    </table>
  </li>
  <li>Program Counter (프로그램 카운터) : 프로세스가 다음에 실행할 명령어의 주소를 가르키는 리지스터이다.</li>
  <li>CPU Register : CPU가 빠르게 접근할 수 있는 임시 저장소로,프로세스가 중단되었다가 다시 실행될떄를 위한 값을 저장한다.</li>
  <li>Scheduling Information: Process 우선순위, 스케줄링 관련 정보 저장한다.</li>
  <li>Memory Pointer : 메모리 영역을 가르키는 포인터다. 각 프로세스는 메모리가 Code Segment, Data Segment, Heap Segment, Stack Segment로 이루어져 있다.
    <ol>
      <li>Code Segment : 프로세스가 실행하는 코드가 기계어로 저장된 공간이다.</li>
      <li>Data Segement : Global Variable, Static Variable등이 저장되어 있는 공간이며 실행 중에 변경이 가능하다.</li>
      <li>Heap Segment : 사용자가 관리하는 영역으로 동적으로 할당한 메모리가 저장되는 공간이다.</li>
      <li>Stack Segment: 함수안에 저장이 된 Local Variable, Parameter, Return Value, Return Address등이 저장된 공간이다. 스택 자료구조 처럼 LIFO 방식으로 작동이 되며 빈 스택은 제거한다.</li>
    </ol>
  </li>
  <li>Memmory Management Information: 프로세스 주소 정보를 저장한다. <strong>Page Table</strong>, <strong>Segment Table</strong> 등이 포함된다.</li>
  <li>I/O Status Information : 프로세스 실행 중 발생하는 입출력 요청관련 정보를 저장한다.</li>
  <li>Account Information : <strong>프로세서</strong>의 사용 시간, 시간 제한 등 실행 정보가 저장된다.</li>
</ol>

<h4 id="ipc-inter-process-communication">IPC (Inter-Process Communication)</h4>
<p>IPC는 여러 프로세스 사이에서 서로 데이터를 주고 받는 행위를 뜻한다. 주로 파이프로 소통이 가능하며 메세지를 전달하고 받을 수 있다. 주로 <code class="language-plaintext highlighter-rouge">read()</code>와 <code class="language-plaintext highlighter-rouge">write()</code>를 이용을 한다.</p>

<p>예제 코드:</p>
<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="nf">write_pipe</span><span class="p">(</span><span class="kt">int</span> <span class="n">fd</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">msg</span><span class="p">,</span> <span class="n">Trader</span> <span class="o">*</span><span class="n">trader</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">fd</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">perror</span><span class="p">(</span><span class="s">"FD is invalid</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
		<span class="k">return</span><span class="p">;</span>
	<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">trader</span> <span class="o">-&gt;</span> <span class="n">is_online</span><span class="p">)</span> <span class="p">{</span>
			<span class="c1">// DISCONNECTED_PID = trader -&gt; pid;</span>
			<span class="n">write</span><span class="p">(</span><span class="n">fd</span><span class="p">,</span> <span class="n">msg</span><span class="p">,</span> <span class="n">strlen</span><span class="p">(</span><span class="n">msg</span><span class="p">));</span>
		<span class="p">}</span>
	<span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="스레드"><strong>스레드</strong></h3>
<p>스레드는 프로세스 내부의 작은 실행 단위로, 프로세스 내 자원을 공유를 한다. 즉 같은 프로세스 안에 있는 여러 쓰레드는 메모리 영역을 공유 할 수 있다. 그리고 여러작업을 동시에 실행할 수 있도록 지원을 한다.</p>

<h2 id="multi-processing-vs-multi-threading">Multi-Processing vs Multi-Threading</h2>
<p><strong>멀티 프로세싱</strong>은 한개 이상의 프로세스가 실행되는 시스템이다.</p>

<p><strong>장점</strong>:</p>
<ul>
  <li>실행 중에 한 프로세스가 죽어도 다른 프로세스에 영향을 끼치지 않고 계속 실행</li>
</ul>

<p><strong>단점</strong>:</p>
<ul>
  <li>멀티 스레딩보다 많은 메모리 공간 (각 프로세스 당 독립적인 메모리 공간 차지)과 CPU 시간을 차지</li>
</ul>

<p><strong>멀티 스레딩</strong>은 한 프로세스에서 여러 개의 스레드를 동시에 실행하는 것이다.</p>

<p><strong>장점</strong>:</p>
<ul>
  <li>여러 스레드를 동시에 실행함으로서 프로그램이 효율적으로 자원을 공유하고, 활용</li>
  <li>스레드 간의 Context Switching은 같은 프로세스 내에서 Heap을 공유하므로, 프로세스 간의 Context Switching보다 더 빠르고 가벼움</li>
</ul>

<p><strong>단점</strong>:</p>
<ul>
  <li>하나의 스레드에 문제가 발생하면 전체 스레드에 영향을 받음</li>
  <li>다수의 스레드가 공유 데이터에 접근할 경우에 동기화 기법이 필수</li>
</ul>

<h3 id="context-switching-문맥-전환">Context Switching (문맥 전환)</h3>
<p>문맥 전환은 현재 실행하던 작업을 <strong>저장</strong>하고 다른 작업을 수행하기 위한 과정이다.</p>
<h3 id="scheduling-스케줄링">Scheduling (스케줄링)</h3>
<p>스케줄링: CPU 자원을 프로세스/쓰레드에 할당하는 전략이다.</p>
<h3 id="스케줄링-알고리즘">스케줄링 알고리즘</h3>
<ul>
  <li>FCFS(First Come First Served) : 요청된 순서대로 프로세스를 실행하지만 긴 프로세스가 짧은 프로세스를 지연한다.</li>
  <li>Round Robin : 할당량을 정하고 : 정해진 시간만큼 하당한 후 각 프로세스를 실행하며, 응답 시간이 동일하지만 문맥 전환 비용이 발생한다.</li>
  <li>SJF(Shortest Job First) : 실행 기간이 짧은 프로세스를 먼저 실행하며 평균 대기 시간을 최소화하지만, 실행 중에 인터럽트가 불가능하다.</li>
  <li>Priority Scheduling : 우선 순위가 높은 프로세스부터 실행을 하며, 운선 순위에 밀려나가 프로세스는 실행이 안 될 가능성이 있다.
    <h3 id="interrupt-인터럽트">Interrupt (인터럽트)</h3>
    <p>인터럽트는 CPU의 현재 작업을 중단하고 우선 순위가 높은 작업을 처리하도록 주는 신호다.</p>
  </li>
</ul>

<p>인터럽트 처리 과정은 다음과 같다.</p>
<ol>
  <li>인터럽트 발생</li>
  <li>언터럽트 서비스 루틴 실행 : 인터럽트 발생 시 실행되는 코드</li>
  <li>인터럽트 처리</li>
  <li>원래 작업으로 복귀</li>
</ol>

<h3 id="process-synchronization-동기화">Process Synchronization (동기화)</h3>
<p>주요 문제: Race condition(경쟁 상태), Deadlock(교착 상태), Starvation(기아 상태).</p>

<p>Lock: 상호 배제(mutual exclusion)을 보장.</p>

<p>Conditional Variable: 특정 조건을 만족할 때까지 쓰레드를 대기시키는 동기화 도구.</p>
<h4 id="concurrency-동시성-vs-parallelism-병렬성">Concurrency (동시성) vs Parallelism (병렬성)</h4>
<ul>
  <li>concurrency : 여러 작업이 동시에 처리</li>
  <li>Parallelism : 어떤 하나의 작업을 여러개로 나눈후, 이를 동시에 처리해서 완성하는 개념</li>
</ul>

<h4 id="race-condition-경쟁-상태">Race Condition (경쟁 상태)</h4>
<p>레이스 컨티션은 두개 이상의 스레드가 공유 자원을 읽고 수정하면서 시간에 따라 다른 출력을 나타내는 상황이다.</p>
<h4 id="critical-section-임계-구역">Critical Section (임계 구역)</h4>
<p>임계 구역은 두개 이상의 프로세스를 실행할때 동일한 자원을 동시에 접근하는 작업을 실행하는 코드 구간이다.</p>
<ol>
  <li>Mutual Exclusion</li>
  <li>Progress</li>
  <li>Bounded Waiting</li>
</ol>

<h4 id="solution">Solution</h4>
<ul>
  <li>Hardware
    <ol>
      <li>Memory Barriers</li>
      <li>Compare &amp; Swap</li>
      <li>Atomic Variables</li>
    </ol>
  </li>
  <li>Software
    <ol>
      <li>Mutex Locks</li>
      <li>Semaphores</li>
      <li>Monitor</li>
    </ol>
  </li>
</ul>

<h2 id="memory-management-메모리-관리">Memory Management (메모리 관리)</h2>

<p><a href="#process-control-block-pcb">PCB</a>에 설명한대로 메모리는 Code, Data, Heap, Stack 구간으로 나뉘어 질 수 있다.</p>

<p><img src="/public/media/memory%20structure.png" alt="memory structure" /></p>

<h2 id="virtual-memory-가상-메모리">Virtual Memory (가상 메모리)</h2>
<p>Virtual Memory: 실제 물리적 메모리보다 큰 논리적 주소 공간을 제공 한다.</p>

<p>장점:</p>
<ul>
  <li>큰 프로그램 실행 가능</li>
  <li>메모리 효율적 사용</li>
</ul>

<!-- ### Address Translation (주소 변환)
주소 변환은 가상 주소를 물리 주소로 변환하는 과정이다. 
주로 MMU(Memory Management Unit)가 수행을 하며,....  -->

<h3 id="paging-페이징">Paging (페이징)</h3>
<p>페이징은 가상 주소 공간을 고정 크기 단위인 페이지로 나누고, 물리적 주소를 페이지 프레임으로 나눠서 매핑하는걸 의미한다. 이떄 페이지 테이블을 이용해서 가상 메모리를 관리를 해준다.</p>

<p>사용되는 알고리즘: FIFO, LRU(Least Recently Used), Optimal.</p>

<ul>
  <li>메모리 보호</li>
  <li>페이징 테이블</li>
  <li>접근 권한</li>
</ul>

<h3 id="swapping-스와핑">Swapping (스와핑)</h3>
<p>스와핑은 물리 메모리 부족 시, 일부 페이지를 디스크로 이동하는 행위를 일컫는다.</p>

<p><strong>Page Fault</strong> (페이지 폴트): 필요한 페이지가 메모리에 없을 때 발생한다.</p>

<!-- ## Cache (캐시)

--- -->
<h2 id="기타">기타</h2>

<h3 id="redundant-array-of-independent-raid">Redundant Array of Independent (RAID)</h3>
<p>RAID는 여러개의 하드디스크가 있을때 동일한 데이터를 다른 위치에 중복해서 저장하는 방법이다. 이는 <strong>데이터 복구</strong>를 위해 자주 쓰는 방법이다.</p>

<!-- 
#### Stripping & Mirroring (스트라이핑 및 미러링) 
- 스트라이핑 : 
- 미러링 :  -->

<h2 id="references">References</h2>
<ul>
  <li><a href="https://pages.cs.wisc.edu/~remzi/OSTEP/">Operating Systems: Three Easy Pieces</a></li>
  <li><a href="https://medium.com/@jamesypatch/multithreading-vs-hyperthreading-benefits-and-drawbacks-e82970686426">Multi-Threading vs Multi-Processing</a></li>
  <li><a href="https://velog.io/@hyungzin0309/User-mode-Kernel-mode">User mode, Kernel Mode</a></li>
  <li><a href="https://velog.io/@shindoyeon/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C-%EB%A9%94%EB%AA%A8%EB%A6%AC-%EA%B5%AC%EC%A1%B0">메모리 구조</a></li>
  <li><a href="https://velog.io/@raejoonee/%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4%EC%99%80-%EC%8A%A4%EB%A0%88%EB%93%9C%EC%9D%98-%EC%B0%A8%EC%9D%B4">프로세스와 스레드 차이</a></li>
  <li><a href="https://velog.io/@mingadinga_1234/%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4%EB%9E%80-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4%EC%9D%98-%EC%83%81%ED%83%9C">프로세스 상태</a></li>
  <li><a href="https://liamkwo.github.io/interview1/">신입 백앤드 개발자(나)를 위한 면접 질문 정리 - 네트워크, 운영체제</a></li>
</ul>


</div>


<div class="comments">
<div id="disqus_thread"></div>
<script>
 var disqus_config = function () {
     this.page.url = 'https://smyeong123.github.io/2024/11/01/Operating-System.html';
     this.page.identifier = '/2024/11/01/Operating-System';
     this.page.title = '[KR] Operating System Note';
 };

 (function() {  // REQUIRED CONFIGURATION VARIABLE: EDIT THE SHORTNAME BELOW
     var d = document, s = d.createElement('script');

     s.src = '//smyeong123.disqus.com/embed.js';

     s.setAttribute('data-timestamp', +new Date());
     (d.head || d.body).appendChild(s);
 })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>

</div>




<div class="related">
  <h2>related posts</h2>
  <ul class="related-posts">
    
      <li>
        <h3>
          <a href="/2025/02/01/14003-solution.html">
            [KR] 백준 14003 - 가장 긴 증가하는 부분 수열 5
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/2025/01/18/9935-solution.html">
            [KR] 백준 9935 - 문자열 폭발
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/2025/01/02/33527-solution.html">
            [KR] 백준 33527 - 신촌 길찾기 서비스
          </a>
        </h3>
      </li>
    
  </ul>
</div>




  
  <h2>all tags</h2>
  <div class="tag-cloud"><a href="/tag/cs/" class="set-1">CS</a> <a href="/tag/dp/" class="set-1">DP</a> <a href="/tag/lis/" class="set-1">LIS</a> <a href="/tag/os/" class="set-1">OS</a> <a href="/tag/ps/" class="set-5">PS</a> <a href="/tag/folyd-warshall/" class="set-1">folyd-warshall</a> <a href="/tag/graph/" class="set-1">graph</a> <a href="/tag/stack/" class="set-1">stack</a></div>
  




<script>
  let i = 0;
  const text = '';
  const speed = parseInt('50');
  
  function typeWriter() {
    if (i < text.length) {
      document.getElementById('animated-post-description').innerHTML += text.charAt(i);
      i++;
      setTimeout(typeWriter, speed);
    }
  }

  document.getElementById('animated-post-description').style.display = 'initial';
  typeWriter();

  // Image modal
  var $imgs = [];
  $('img').each(function(idx) {
    var obj = {
      src: $(this).attr('src')
    }
    $imgs.push(obj);
    var elem = $(this);
    $(this).click(function() {
      $('.modal').magnificPopup('open', idx);
    });
  });

  $('.modal').magnificPopup({
    items: $imgs,
    type: 'image',
    closeOnContentClick: true,
    mainClass: 'mfp-img-mobile',
    image: {
      verticalFit: true
    }
    
  });
</script>

      </div>
    </main><footer class="site-footer">
  <div class="wrapper">
    <div class="credits"><a href="https://github.com/bitbrain/jekyll-dash">dash</a> theme for Jekyll by <a href="https://github.com/bitbrain">bitbrain</a> made with <i class="fas fa-heart"></i><div class="toggleWrapper">
    <input type="checkbox" class="dn" id="theme-toggle" onclick="modeSwitcher()" checked />
    <label for="theme-toggle" class="toggle">
    <span class="toggle__handler">
      <span class="crater crater--1"></span>
      <span class="crater crater--2"></span>
      <span class="crater crater--3"></span>
    </span>
        <span class="star star--1"></span>
        <span class="star star--2"></span>
        <span class="star star--3"></span>
        <span class="star star--4"></span>
        <span class="star star--5"></span>
        <span class="star star--6"></span>
    </label>
</div>
<script type="text/javascript">
const theme = localStorage.getItem('theme');

if (theme === "light") {
    document.documentElement.setAttribute('data-theme', 'light');
} else {
    document.documentElement.setAttribute('data-theme', 'dark');
}
const userPrefers = getComputedStyle(document.documentElement).getPropertyValue('content');

function activateDarkTheme() {
    document.getElementById('theme-toggle').checked = true;
    document.documentElement.setAttribute('data-theme', 'dark');
    document.documentElement.classList.add('theme--dark');
    document.documentElement.classList.remove('theme--light');
	document.getElementById("theme-toggle").className = 'light';
	window.localStorage.setItem('theme', 'dark');
}

function activateLightTheme() {
    document.getElementById('theme-toggle').checked = false;
    document.documentElement.setAttribute('data-theme', 'light');
    document.documentElement.classList.add('theme--light');
    document.documentElement.classList.remove('theme--dark');
	document.getElementById("theme-toggle").className = 'dark';
	window.localStorage.setItem('theme', 'light');
}

if (theme === "dark") {
    activateDarkTheme();
} else if (theme === "light") {
    activateLightTheme();
} else if  (userPrefers === "light") {
    activateDarkTheme();
} else {
    activateDarkTheme();
}

function modeSwitcher() {
	let currentMode = document.documentElement.getAttribute('data-theme');
	if (currentMode === "dark") {
	    activateLightTheme();
	} else {
	    activateDarkTheme();
	}
}
</script></div>
  </div>
</footer>


<script>
      window.FontAwesomeConfig = {
        searchPseudoElements: true
      }
    </script>
  </body>

</html>
